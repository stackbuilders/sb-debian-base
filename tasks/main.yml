---
- include: prebootstrap-tasks.yml
  remote_user: root
  tags:
    - prebootstrap
    - seo-app
    - seo-ops
    - seo-db
    - dynamic-app
    - dynamic-ops
    - dynamic-db

- include: bootstrap-tasks.yml
  remote_user: administrator
  become: yes
  become_method: sudo
  tags:
    - bootstrap
    - seo-app
    - seo-ops
    - seo-db
    - dynamic-app
    - dynamic-ops
    - dynamic-db

- name: Install common Haskell build dependencies
  remote_user: administrator
  become: yes
  become_method: sudo
  apt: name={{ item }} state=present
  with_items:
    - libpcre3-dev
    - libsqlite3-dev
    - libpq-dev
  tags:
    - haskell-build-dependencies


- include: haskell-stack-tasks.yml
  remote_user: administrator
  become: yes
  become_method: sudo
  tags:
    - haskell-stack


- name: Install rvm dependencies
  remote_user: administrator
  become: yes
  become_method: sudo
  apt: name='{{ item }}' state=present
  with_items:
    - build-essential
    - tklib
    - zlib1g-dev
    - libssl-dev
    - libreadline-gplv2-dev
    - libxml2
    - libxml2-dev
    - libxslt1-dev
  tags:
    - ruby-dependencies
    - seo-app
    - seo-ops
    - dynamic-app
    - dynamic-ops
