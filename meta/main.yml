---
galaxy_info:
  author: Justin Leitgeb
  description: Base image and common roles
  company: Stack Builders
  license: MIT
  min_ansible_version: 2.0.1
  platforms:
    - name: Debian
      versions:
        - all

  galaxy_tags:
    - sb-base

dependencies:
  - role: kamaln7.swapfile
    become: yes
    become_method: sudo
    remote_user: "{{ admin_user }}"
    swapfile_size: "{{ swap_file_size }}"
    when: bootstrap is defined

  - role: ansible-role-unattended-upgrades
    become: yes
    become_method: sudo
    remote_user: "{{ admin_user }}"
    unattended_origins_patterns:
      - "origin=Debian,archive=${distro_codename},label=Debian-Security"
    unattended_mail: "{{ uu_email_alerts }}"
    unattended_automatic_reboot: false
    when: bootstrap is defined

  - role: nickjj.fail2ban
    become: yes
    become_method: sudo
    remote_user: "{{ admin_user }}"
    when: bootstrap is defined

  - role: jdauphant.ssl-certs
    become: yes
    become_method: sudo
    remote_user: "{{ admin_user }}"
    ssl_certs_common_name: "{{ hostname }}"
    when: nginx-https is defined

  - role: jdauphant.nginx
    become: yes
    become_method: sudo
    remote_user: "{{ admin_user }}"
    when: nginx is defined

  - role: ANXS.postgresql
    become: yes
    become_method: sudo
    remote_user: "{{ admin_user }}"
    when: postgres is defined
